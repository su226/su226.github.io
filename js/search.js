"use strict";function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,c=[],o=!0,i=!1;try{for(r=r.call(e);!(o=(n=r.next()).done)&&(c.push(n.value),!t||c.length!==t);o=!0);}catch(e){i=!0,a=e}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return c}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,o=!0,i=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){i=!0,c=e},f:function(){try{o||null==r.return||r.return()}finally{if(i)throw c}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}!function(){var e=regeneratorRuntime.mark(r),t=function(){function e(t){_classCallCheck(this,e),this.fail=null,this.next={},this.end=!1,this.depth=t||0}return _createClass(e,[{key:"insert",value:function(t){var r,n=this,a=_createForOfIteratorHelper(t);try{for(a.s();!(r=a.n()).done;){var c=r.value;c in n.next||(n.next[c]=new e(n.depth+1)),n=n.next[c]}}catch(e){a.e(e)}finally{a.f()}n.end=!0}},{key:"build",value:function(){var e=[];this.fail=this;for(var t=0,r=Object.values(this.next);t<r.length;t++){var n=r[t];n.fail=this,e.push([this,n])}for(;0!=e.length;)for(var a=_slicedToArray(e.shift(),2),c=a[0],o=a[1],i=0,l=Object.entries(o.next);i<l.length;i++){for(var s=_slicedToArray(l[i],2),u=s[0],f=s[1],d=c.fail;d!=this&&!(u in d.next);)d=d.fail;u in d.next&&(d=d.next[u]),f.fail=d,e.push([o,f])}}},{key:"match",value:function(e,t){for(var r=this,n=t||0;n<e.length;n++){for(var a=e[n];r!=this&&!(a in r.next);)r=r.fail;if(a in r.next&&(r=r.next[a]),r.end)return[n-r.depth+1,n+1]}return[-1,-1]}},{key:"matchAll",value:function(e){for(var t=[],r=0;;){var n=_slicedToArray(this.match(e,r),2),a=n[0],c=n[1];if(-1===a)break;t.push([a,c]),r=c}return t}}]),e}();function r(r,n){var a,c,o,i,l,s,u,f;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==(a=new Set(n.split(/\s+/g).filter((function(e){return 0!==e.length})).map((function(e){return e.toLowerCase()})))).size){e.next=3;break}return e.abrupt("return",!1);case 3:c=new t,o=_createForOfIteratorHelper(a);try{for(o.s();!(i=o.n()).done;)l=i.value,c.insert(l)}catch(e){o.e(e)}finally{o.f()}c.build(),s=_createForOfIteratorHelper(r),e.prev=8,f=regeneratorRuntime.mark((function e(){var t,r,n,o,i,l,s,f,d,p,h,m,y,v,b,x,_,k,g,A,C,w,T,S,E,H,I,O,L,F,M,q,N,P,R,j,G,B,Z,W,z,D,U,Y,$,J,K,Q,V,X,ee,te,re,ne,ae,ce,oe,ie,le,se,ue,fe,de,pe,he,me,ye,ve,be,xe,_e,ke,ge,Ae,Ce,we,Te,Se,Ee,He,Ie,Oe,Le,Fe;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=u.value,r=t.title.toLowerCase(),n=new Set,o=c.matchAll(r),i=c.matchAll(t.url),l=c.matchAll(t.lowerContent),s=t.tags.map((function(e){return a.has(e)?(n.add(e),[e,!0]):[e,!1]})),f=t.categories.map((function(e){return a.has(e)?(n.add(e),[e,!0]):[e,!1]})),d=_createForOfIteratorHelper(o);try{for(d.s();!(p=d.n()).done;)h=_slicedToArray(p.value,2),m=h[0],y=h[1],n.add(r.slice(m,y))}catch(e){d.e(e)}finally{d.f()}v=_createForOfIteratorHelper(i);try{for(v.s();!(b=v.n()).done;)x=_slicedToArray(b.value,2),_=x[0],k=x[1],n.add(t.url.slice(_,k))}catch(e){v.e(e)}finally{v.f()}g=_createForOfIteratorHelper(l);try{for(g.s();!(A=g.n()).done;)C=_slicedToArray(A.value,2),w=C[0],T=C[1],n.add(t.lowerContent.slice(w,T))}catch(e){g.e(e)}finally{g.f()}S=!0,E=_createForOfIteratorHelper(a),e.prev=16,E.s();case 18:if((H=E.n()).done){e.next=25;break}if(I=H.value,n.has(I)){e.next=23;break}return S=!1,e.abrupt("break",25);case 23:e.next=18;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(16),E.e(e.t0);case 30:return e.prev=30,E.f(),e.finish(30);case 33:if(S){e.next=35;break}return e.abrupt("return","continue");case 35:O=[],L=new Set,F=_createForOfIteratorHelper(l),e.prev=38,F.s();case 40:if((M=F.n()).done){e.next=73;break}if(q=_slicedToArray(M.value,2),N=q[0],P=q[1],R=t.lowerContent.slice(N,P),!L.has(R)){e.next=45;break}return e.abrupt("continue",71);case 45:L.add(R),j=N-10,G=P+10,B=!1,Z=_createForOfIteratorHelper(O),e.prev=50,Z.s();case 52:if((W=Z.n()).done){e.next=62;break}if(z=W.value,!(G>=z.begin&&j<=z.end)){e.next=60;break}return z.begin=Math.min(z.begin,j),z.end=Math.max(z.end,G),z.marks.push([N,P]),B=!0,e.abrupt("break",62);case 60:e.next=52;break;case 62:e.next=67;break;case 64:e.prev=64,e.t1=e.catch(50),Z.e(e.t1);case 67:return e.prev=67,Z.f(),e.finish(67);case 70:B||O.push({begin:j,end:G,marks:[[N,P]]});case 71:e.next=40;break;case 73:e.next=78;break;case 75:e.prev=75,e.t2=e.catch(38),F.e(e.t2);case 78:return e.prev=78,F.f(),e.finish(78);case 81:(D=document.createElement("article")).className="post-card",U=document.createElement("a"),D.appendChild(U),U.className="post-link waves-effect",U.href=t.url,(Y=document.createElement("h3")).className="post-card-title",D.appendChild(Y),$=0,J=_createForOfIteratorHelper(o);try{for(J.s();!(K=J.n()).done;)Q=_slicedToArray(K.value,2),V=Q[0],X=Q[1],Y.innerHTML+="".concat(t.title.slice($,V),"<mark>").concat(t.title.slice(V,X),"</mark>"),$=X}catch(e){J.e(e)}finally{J.f()}for(Y.innerHTML+=t.title.slice($),(ee=document.createElement("p")).className="post-card-content",D.appendChild(ee),0===O.length&&(ee.textContent=t.content.slice(0,64)),O.sort((function(e,t){return e.begin-t.begin})),te=0,re=O;te<re.length;te++){(ne=re[te]).marks.sort((function(e,t){return e[0]-t[0]})),ae=ne.begin,ce=_createForOfIteratorHelper(ne.marks);try{for(ce.s();!(oe=ce.n()).done;)ie=_slicedToArray(oe.value,2),le=ie[0],se=ie[1],ee.innerHTML+="".concat(t.content.slice(ae,le),"<mark>").concat(t.content.slice(le,se),"</mark>"),ae=se}catch(e){ce.e(e)}finally{ce.f()}ee.innerHTML+="".concat(t.content.slice(ae,ne.end),"...")}if((ue=document.createElement("div")).className="post-info",D.appendChild(ue),0!==f.length){(fe=document.createElement("span")).className="iconify",fe.dataset.icon="mdi:folder",ue.appendChild(fe),(de=document.createElement("ul")).className="post-categories",ue.appendChild(de),pe=_createForOfIteratorHelper(f);try{for(pe.s();!(he=pe.n()).done;)me=_slicedToArray(he.value,2),ye=me[0],ve=me[1],be=document.createElement("li"),de.appendChild(be),be.innerHTML=ve?'<a href="/categories/'.concat(ye,'"><mark>').concat(ye,"</mark></a>"):'<a href="/categories/'.concat(ye,'">').concat(ye,"</a>")}catch(e){pe.e(e)}finally{pe.f()}}if(0!==s.length){(xe=document.createElement("span")).className="iconify",xe.dataset.icon="mdi:tag",ue.appendChild(xe),(_e=document.createElement("ul")).className="post-tags",ue.appendChild(_e),ke=_createForOfIteratorHelper(s);try{for(ke.s();!(ge=ke.n()).done;)Ae=_slicedToArray(ge.value,2),Ce=Ae[0],we=Ae[1],Te=document.createElement("li"),_e.appendChild(Te),Te.innerHTML=we?'<a class="chip waves-effect" href="/tags/'.concat(Ce,'"><mark>').concat(Ce,"</mark></a>"):'<a class="chip waves-effect" href="/tags/'.concat(Ce,'">').concat(Ce,"</a>")}catch(e){ke.e(e)}finally{ke.f()}}(Se=document.createElement("span")).className="iconify",Se.dataset.icon="mdi:link",ue.appendChild(Se),(Ee=document.createElement("p")).className="search-permalink",ue.appendChild(Ee),$=0,He=_createForOfIteratorHelper(i);try{for(He.s();!(Ie=He.n()).done;)Oe=_slicedToArray(Ie.value,2),Le=Oe[0],Fe=Oe[1],Ee.innerHTML+="".concat(t.url.slice($,Le),"<mark>").concat(t.url.slice(Le,Fe),"</mark>"),$=Fe}catch(e){He.e(e)}finally{He.f()}return Ee.innerHTML+=t.url.slice($),e.next=118,D;case 118:case"end":return e.stop()}}),e,null,[[16,27,30,33],[38,75,78,81],[50,64,67,70]])})),s.s();case 11:if((u=s.n()).done){e.next=18;break}return e.delegateYield(f(),"t0",13);case 13:if("continue"!==e.t0){e.next=16;break}return e.abrupt("continue",16);case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(8),s.e(e.t1);case 23:return e.prev=23,s.f(),e.finish(23);case 26:return e.abrupt("return",!0);case 27:case"end":return e.stop()}}),e,null,[[8,20,23,26]])}var n={script:document.currentScript.getAttribute("src"),SEARCH_PAGE_SIZE:10,update:function(){for(var e=0,t=Array.from(this.results.children);e<t.length;e++){t[e].remove()}this.resultGen=r(this.indices,this.input.value);var n=this.resultGen.next();if(n.done)this.resultsBox.dataset.search=n.value?"empty":"";else{for(var a=1;a<this.SEARCH_PAGE_SIZE&&!n.done;a++)this.results.appendChild(n.value),n=this.resultGen.next();n.done?this.resultsBox.dataset.search="":(this.resultsBox.dataset.search="incomplete",this.results.appendChild(n.value))}},init:function(e){var t=this;this.input=document.querySelector("#search-input"),this.resultsBox=document.querySelector("#search-results-box"),this.results=document.querySelector("#search-results"),this.indices=[],fetch("/search.xml").then((function(e){return e.text()})).then((function(e){var r,n=_createForOfIteratorHelper((new DOMParser).parseFromString(e,"text/xml").querySelectorAll("entry"));try{for(n.s();!(r=n.n()).done;){var a=r.value,c=a.querySelector("content").textContent;t.indices.push({title:a.querySelector("title").textContent,url:a.querySelector("url").textContent,content:c,lowerContent:c.toLowerCase(),categories:Array.from(a.querySelectorAll("category")).map((function(e){return e.textContent})),tags:Array.from(a.querySelectorAll("tag")).map((function(e){return e.textContent}))})}}catch(e){n.e(e)}finally{n.f()}document.querySelector("#search-pending").remove(),t.update()}));var r="";this.input.addEventListener("keyup",(function(){t.input.value!==r&&(r=t.input.value,t.update())})),this.input.addEventListener("change",(function(){t.update()})),document.querySelector("#search-clear").addEventListener("click",(function(){t.input.value="",t.update()})),document.querySelector("#search-more").addEventListener("click",(function(){for(var e=t.resultGen.next(),r=1;r<t.SEARCH_PAGE_SIZE&&!e.done;r++)t.results.appendChild(e.value),e=t.resultGen.next();t.resultsBox.dataset.search=e.done?"":"incomplete"}))}};window.pageModules.push(n)}();