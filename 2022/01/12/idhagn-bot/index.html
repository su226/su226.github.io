<!DOCTYPE html><html><head><meta charset="UTF-8" name="viewport" content="width=device-width"><title>IdhagnBot - 也许是最没用的QQ机器人 - su226的博客</title><meta name="generator" content="Hexo 6.2.0"><meta name="description" content="一时兴起写的QQ机器人，基于Nonebot2和go-cqhttp开发，目前并无太多功能"><meta property="og:type" content="article"><meta property="og:title" content="IdhagnBot - 也许是最没用的QQ机器人"><meta property="og:url" content="https://su226.tk/2022/01/12/idhagn-bot/index.html"><meta property="og:site_name" content="su226的博客"><meta property="og:description" content="一时兴起写的QQ机器人，基于Nonebot2和go-cqhttp开发，目前并无太多功能"><meta property="og:locale" content="zh_CN"><meta property="article:published_time" content="2022-01-11T16:00:00.000Z"><meta property="article:modified_time" content="2022-09-16T16:00:00.000Z"><meta property="article:author" content="su226"><meta property="article:tag" content="Furry"><meta property="article:tag" content="Python"><meta name="twitter:card" content="summary"><link rel="stylesheet" href="/css/normalize-8.0.1-min.css"><link rel="stylesheet" href="/css/waves-0.7.6-min.css"><link rel="stylesheet" href="/css/base.css"><link rel="stylesheet" href="/css/colors.css"><link rel="stylesheet" href="/css/info.css"><link rel="stylesheet" href="/css/post.css"></head><body><nav class="sidebar"><div class="sidebar-header color-blue"><img class="sidebar-avatar" src="https://avatars.githubusercontent.com/u/17371317?s=112"> <span class="sidebar-title">su226的博客</span> <span class="sidebar-subtitle">汪汪汪！（发出逼真的猫叫声） </span><button id="settings" class="btn-icon"><span class="iconify" data-icon="mdi:cog"></span></button></div><ul class="menu" id="menu"><li class="menu-item"><span class="menu-icon iconify" data-icon="mdi:home"></span> <a class="menu-link" href="/">主页</a></li><li class="menu-item"><span class="menu-icon iconify" data-icon="mdi:file-document"></span> <a class="menu-link" href="/archives">文章</a></li><li class="menu-item"><span class="menu-icon iconify" data-icon="mdi:magnify"></span> <a class="menu-link" href="/search">搜索</a></li><li class="menu-item"><span class="menu-icon iconify" data-icon="mdi:view-grid"></span> <a class="menu-link" href="/apps/">应用</a></li><li class="menu-item"><span class="menu-icon iconify" data-icon="ri:bilibili-fill"></span> <a class="menu-link" target="_blank" rel="noopener" href="https://space.bilibili.com/14334962">Bilibili</a></li><li class="menu-item"><span class="menu-icon iconify" data-icon="mdi:github-circle"></span> <a class="menu-link" target="_blank" rel="noopener" href="https://github.com/su226">GitHub</a></li></ul></nav><div class="navbar-fixed"><nav class="navbar color-blue-grey"><button class="btn-icon" id="toggle-menu"><span class="iconify" data-icon="mdi:menu"></span></button><div class="navbar-title">IdhagnBot - 也许是最没用的QQ机器人</div><button class="btn-icon" id="back-to-top"><span class="iconify" data-icon="mdi:arrow-up"></span></button></nav></div><div id="content"><div id="i18n-data-post" class="i18n-data" data-tab-menu="菜单" data-tab-toc="目录" data-comment-unsupported="抱歉，你的浏览器太旧了，不支持评论区。（评论区至少需要 Chrome 71 / Firefox 65 / Edge 79）"></div><article class="post"><div class="post-header color-blue-grey"><div class="container"><h1 class="post-title">IdhagnBot - 也许是最没用的QQ机器人</h1><div class="post-info"><span class="iconify" data-icon="mdi:calendar"></span><ul class="post-date"><li><a href="/archives/2022">2022</a></li><li><a href="/archives/2022/01">1</a></li><li>12</li></ul><span class="iconify" data-icon="mdi:calendar-plus"></span><ul class="post-date"><li>2022</li><li>9</li><li>17</li></ul><div class="post-info-wrap"></div><span class="iconify" data-icon="mdi:folder"></span><ul class="post-categories"><li><a href="/categories/%E8%BD%AF%E4%BB%B6/">软件</a></li></ul><span class="iconify" data-icon="mdi:tag"></span><ul class="post-tags"><li><a class="chip" href="/tags/Furry/">Furry</a></li><li><a class="chip" href="/tags/Python/">Python</a></li></ul></div></div></div><div class="toc" id="toc"><a class="toc-header toc-link" href="#content">IdhagnBot - 也许是最没用的QQ机器人</a><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%83%8C%E6%99%AF"><span class="toc-text">背景</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8A%9F%E8%83%BD"><span class="toc-text">功能</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%8D%E4%BC%9A%E6%B7%BB%E5%8A%A0%E7%9A%84%E5%8A%9F%E8%83%BD"><span class="toc-text">不会添加的功能</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%80%E4%BB%A5%E8%B7%9FFurry%E4%BB%80%E4%B9%88%E5%85%B3%E7%B3%BB"><span class="toc-text">所以跟Furry什么关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%82%A3%E4%B9%88%EF%BC%8C%E5%9C%A8%E5%93%AA%E8%83%BD%E8%B0%83%E6%88%8F%E7%8E%A9%E5%88%B0%E5%91%A2%EF%BC%9F"><span class="toc-text">那么，在哪能调戏玩到呢？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%A6%EF%BC%8C%E5%AF%B9%E4%BA%86%EF%BC%8C%E4%BB%A3%E7%A0%81"><span class="toc-text">哦，对了，代码</span></a></li></ol></div><div class="post-background"><div class="post-content container"><h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>我也不知道多久以前，我看到一个群里机器人的截图，虽然我说过我想尝试做一下，但我还是拖了很久，因为我的精神状态实属不佳。</p><p>然后我大约在生日前一天（2022&#x2F;01&#x2F;08），又想起了这个项目，于是我在一番研究之后，选择了<a target="_blank" rel="noopener" href="https://github.com/nonebot/nonebot2">Nonebot2</a>+<a target="_blank" rel="noopener" href="https://github.com/Mrs4s/go-cqhttp">go-cqhttp</a>来编写我的机器人。另外一个候选项是<a target="_blank" rel="noopener" href="https://github.com/mamoe/mirai">Mirai</a>，但我最终选择放弃它，倒不是因为AGPL3协议的限制，而是因为Mirai是Kotlin写的，需要JVM虚拟机，曾经我开的MC服务器有多占内存我至今历历在目。</p><p>目前机器人运行在我的个人电脑上，24小时开机（<del>如果忽略莫名其妙的崩溃重启的话</del>我把机器人转移到一台老电脑上了），目前只对我自己的粉丝群和其他几个群提供服务。</p><details><summary>我也不知道怎么解决这个</summary><p>我的电脑有时会出现莫名其妙的卡死或者出现MCE Hardware Error然后重启，我也不知道是什么原因，猜测过以下可能：</p><ul><li>主板</li><li>散热器</li><li><a target="_blank" rel="noopener" href="https://wiki.archlinux.org/title/Ryzen#Random_reboots">Linux内核的bug</a></li><li><del>电源供电</del> 换了个800W的电源，没解决</li><li><del>内存超频</del> 已经降回默频，没解决</li></ul><p>下面是MCE的日志和我的电脑配置：</p><pre>Machine check events logged
CPU 4: Machine Check: 0 Bank 5: bea0000000000108
TSC 0 ADDR 7f661f34e590 MISC d012000100000000 SYND 4d000000 IPID 500b000000000 
PROCESSOR 2:870f10 TIME 1585882192 SOCKET 0 APIC a microcode 8701013</pre><ul><li>CPU: 3600X</li><li>主板: 微星 B450 战斧导弹</li><li>内存: 金士顿 骇客神条 8G*2 2666MHz</li><li>显卡: 讯景 5700XT 海外版</li><li>散热: 原装散热（当时没想好，想晚点再买，结果忘了）</li><li>固态: 金士顿 A2000 240G（装有ArchLinux）</li><li>机械: 西数蓝盘 1T（装有Windows 10）</li><li>电源: <del>鑫谷GP600G</del> 酷冷至尊G800</li></ul></details><h2 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h2><p>⚠️ 此处内容<strong>已过时</strong>，请参考<a target="_blank" rel="noopener" href="https://idhagnbot.su226.tk/">新文档</a>（正在施工中）</p><p>目前机器人的功能：</p><ul><li>管理<ul><li>批量发送消息、戳一戳</li><li>定时命令</li><li>可手工操作机器人</li><li>高度可配置的上下文和权限</li><li>简单的API，用于根据需要拓展功能</li><li>非正常退出自动发送警告</li><li>入群退群通知（[TODO] 改名片通知）</li><li>[TODO] 防撤回、防闪照</li></ul></li><li>实用<ul><li>推送B站动态和直播<ul><li>可为每个群配置不同的UP主</li></ul></li><li>实时查看机器人状态</li><li>友好的帮助文档，以及出错提示</li><li>EPIC白嫖查询</li><li>查询微博、知乎、百度、央视和B站热搜</li></ul></li><li>娱乐<ul><li>大量的梗图制作器<ul><li>头像梗图制作（[TODO] 完整移植 nonebot-plugin-petpet）</li><li>文字梗图制作（[TODO] 完整移植 nonebot-plugin-meme和nonebot-plugin-nokia）</li><li>其他（比如彩色菜狗）</li></ul></li><li>简单的互动功能<ul><li>自动复读</li><li>自动回戳</li><li>自动续火</li></ul></li><li>小游戏<ul><li>硬币和骰子</li><li>人生重开模拟器</li><li>[TODO] 比武大会</li><li>[TODO] 今天吃什么</li><li>[TODO] 占卜、塔罗牌、运势或类似功能</li></ul></li><li>This X Doesn’t Exist，目前支持以下网站<ul><li><a target="_blank" rel="noopener" href="https://thispersondoesnotexist.com/">This Person Does Not Exist</a></li><li><a target="_blank" rel="noopener" href="https://thiscatdoesnotexist.com/">This Cat Does Not Exist</a></li><li><a target="_blank" rel="noopener" href="https://thisrentaldoesnotexist.com/">This Rental Does Not Exist</a></li><li><a target="_blank" rel="noopener" href="https://thisartworkdoesnotexist.com/">This Artwork Does Not Exist</a></li><li><a target="_blank" rel="noopener" href="https://thishorsedoesnotexist.com/">This Horse Does Not Exist</a></li><li>[TODO] 支持 <a target="_blank" rel="noopener" href="https://thisxdoesnotexist.com/">This X Does Not Exist</a> 列出的所有网站</li></ul></li><li><a target="_blank" rel="noopener" href="http://random.cat/">random.cat</a> 和 <a target="_blank" rel="noopener" href="https://random.dog/">random.dog</a></li><li><a target="_blank" rel="noopener" href="https://tikolu.net/emojimix/">emojimix</a></li><li>网易云点歌</li><li>搜索danbooru、konachan、e621等booru类图片看板</li><li>[TODO] 每日聊天热词总结</li><li>[TODO] 每晚最晚发（修）言（仙）记录</li><li>[TODO] 肯德基疯狂星期四文案</li></ul></li><li>其他<ul><li>沙箱执行Python（本地，基于Bubblewrap）</li><li><del>可能会发出很臭的声音</del></li></ul></li></ul><p><del>就像OriMod一样，一开始肯定是一段活跃维护的时期，然后逐渐🕊️掉这个项目。</del></p><h3 id="不会添加的功能"><a href="#不会添加的功能" class="headerlink" title="不会添加的功能"></a>不会添加的功能</h3><ul><li>需要QQ以外的帐号或API Key的功能（如<a target="_blank" rel="noopener" href="https://github.com/furleywolf/Furbot-Mirai">绒狸</a>）</li><li>Nonebot2或go-cqhttp不支持的功能</li></ul><h2 id="所以跟Furry什么关系"><a href="#所以跟Furry什么关系" class="headerlink" title="所以跟Furry什么关系"></a>所以跟Furry什么关系</h2><p>因为这个项目是用<a href="/2021/07/24/my-fursona/" title="我的兽设">我的兽设</a>命名的uwu，用来部署机器人的小号也换了个<del>我没钱约稿又不会画画只能拿之前的一张赠图瞎PS凑数的</del>头像，没错就这么简单。（<del>可惜原来的三个邪神被迫少了一个</del>*）</p><p><small>* 因为那个小号以前叫“铪斯塔”，另外两个叫“奈亚拉托提镨”和“克图格铔”，正好对应《潜行吧奈亚子》的三个少(xie)女(shen)</small><br><small>** 加“钅”是因为B站帐号不允许重名，然后为了统(qiang)一(po)性(zheng)我给其他平台的小号也加了。</small></p><h2 id="那么，在哪能调戏玩到呢？"><a href="#那么，在哪能调戏玩到呢？" class="headerlink" title="那么，在哪能调戏玩到呢？"></a>那么，在哪能<del>调戏</del>玩到呢？</h2><p>目前在<a target="_blank" rel="noopener" href="https://jq.qq.com/?_wv=1027&k=IWvwtv2h">我自己的粉丝群</a>里部署了该机器人。</p><p>不过，<strong>我真的很能鸽</strong>，所以未来机器人是否还会活着也不一定<span style="font-size:1.5em"><del>，并且我使用ArchLinux（超大声）</del></span></p><h2 id="哦，对了，代码"><a href="#哦，对了，代码" class="headerlink" title="哦，对了，代码"></a>哦，对了，代码</h2><p><a target="_blank" rel="noopener" href="https://github.com/su226/IdhagnBot">https://github.com/su226/IdhagnBot</a></p></div></div></article><div class="container giscus-wrap"><script id="giscus-script" data-repo="su226/su226.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkxOTgzMjQyNTk=" data-category="Announcements" data-category-id="DIC_kwDOC9IwI84B_VPa" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-lang="zh-CN" data-theme="light" crossorigin="anonymous" async></script></div><div id="footer">由 <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> 强力驱动，托管于 <a target="_blank" rel="noopener" href="https://vercel.com/">Vercel</a>（<a target="_blank" rel="noopener" href="https://gh.su226.tk">备用线路</a>托管于 <a target="_blank" rel="noopener" href="https://pages.github.com/">Github Pages</a>）</div></div><ul id="settings-dialog"><li data-select="scheme" data-default="auto"><button data-option="auto"><span class="iconify" data-icon="mdi:check"></span></button> <button data-option="multi"><span class="iconify" data-icon="mdi:check"></span></button> <button data-option="single"><span class="iconify" data-icon="mdi:check"></span></button> <button data-option="sepia"><span class="iconify" data-icon="mdi:check"></span></button> <button data-option="dark"><span class="iconify" data-icon="mdi:check"></span></button></li><li data-select="font" data-default="sans"><button data-option="sans">Aa</button> <button data-option="serif">Aa</button> <button data-option="mono">Aa</button></li><li><div data-adjust="size"><button data-minus><span class="iconify" data-icon="mdi:minus"></span></button><div class="subgroup-label"><span class="iconify" data-icon="mdi:format-size"></span><span data-label></span></div><button data-plus><span class="iconify" data-icon="mdi:plus"></span></button></div><div data-adjust="width"><button data-minus><span class="iconify" data-icon="mdi:minus"></span></button><div class="subgroup-label"><span class="iconify" data-icon="mdi:arrow-left-right"></span><span data-label></span></div><button data-plus><span class="iconify" data-icon="mdi:plus"></span></button></div><div data-adjust="line"><button data-minus><span class="iconify" data-icon="mdi:minus"></span></button><div class="subgroup-label"><span class="iconify" data-icon="mdi:arrow-expand-vertical"></span><span data-label></span></div><button data-plus><span class="iconify" data-icon="mdi:plus"></span></button></div></li></ul><script src="https://polyfill.io/v3/polyfill.min.js?features=Array.from%2CArray.prototype.%40%40iterator%2Cdocument.currentScript%2CPromise%2Cfetch%2CElement.prototype.replaceWith%2CElement.prototype.classList%2CElement.prototype.remove%2Cwindow.scroll%2CCustomEvent%2CObject.values%2CObject.entries"></script><script src="https://code.iconify.design/2/2.0.4/iconify.min.js" async></script><script src="/js/waves-0.7.6-min.js"></script><script src="/js/regenerator-runtime-0.13.9-min.js"></script><script src="/js/base.js"></script><script src="/js/post.js"></script></body></html>