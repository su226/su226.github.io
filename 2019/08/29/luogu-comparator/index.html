<!DOCTYPE html><html><head><meta charset="UTF-8" name="viewport" content="width=device-width"><title>洛谷比较器用户脚本 - su226的博客</title><meta name="generator" content="Hexo 6.0.0"><meta name="description" content="警告：本脚本随着洛谷更新已经失效。 使用方法一个简单的脚本，向洛谷用户页加入比较功能，让你的洛谷生活更有动力&#x2F;更酸&#x2F;更自闭。 按钮位置 样例1 样例2 更新日志0.0.2 修复了签名有表格时引发的问题  代码一键安装需要Tampermonkey或者其他的用户脚本管理器如果插件被正确配置将会弹出安装界面 123456789101112131415161718192021222324252627282"><meta property="og:type" content="article"><meta property="og:title" content="洛谷比较器用户脚本"><meta property="og:url" content="https://su226.tk/2019/08/29/luogu-comparator/index.html"><meta property="og:site_name" content="su226的博客"><meta property="og:description" content="警告：本脚本随着洛谷更新已经失效。 使用方法一个简单的脚本，向洛谷用户页加入比较功能，让你的洛谷生活更有动力&#x2F;更酸&#x2F;更自闭。 按钮位置 样例1 样例2 更新日志0.0.2 修复了签名有表格时引发的问题  代码一键安装需要Tampermonkey或者其他的用户脚本管理器如果插件被正确配置将会弹出安装界面 123456789101112131415161718192021222324252627282"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://i.loli.net/2019/08/29/13eRksbG4FLpiZW.png"><meta property="og:image" content="https://i.loli.net/2019/08/29/9vQbhpHDimuof21.png"><meta property="og:image" content="https://i.loli.net/2019/08/29/T73jafNJ5ZMoVwP.png"><meta property="article:published_time" content="2019-08-28T16:00:00.000Z"><meta property="article:modified_time" content="2019-08-28T16:00:00.000Z"><meta property="article:author" content="su226"><meta property="article:tag" content="OI"><meta property="article:tag" content="JavaScript"><meta property="article:tag" content="用户脚本"><meta property="article:tag" content="洛谷"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://i.loli.net/2019/08/29/13eRksbG4FLpiZW.png"><link rel="stylesheet" href="/css/normalize-8.0.1-min.css"><link rel="stylesheet" href="/css/waves-0.7.6-min.css"><link rel="stylesheet" href="/css/base.css"><link rel="stylesheet" href="/css/colors.css"><link rel="stylesheet" href="/css/info.css"><link rel="stylesheet" href="/css/post.css"></head><body><nav class="sidebar"><div class="sidebar-header color-blue"><img class="sidebar-avatar" src="https://avatars.githubusercontent.com/u/17371317?s=112"> <span class="sidebar-title">su226的博客</span> <span class="sidebar-subtitle">汪汪汪！（发出逼真的猫叫声） </span><button id="settings" class="btn-icon"><span class="iconify" data-icon="mdi:cog"></span></button></div><ul class="menu" id="menu"><li class="menu-item"><span class="menu-icon iconify" data-icon="mdi:home"></span> <a class="menu-link" href="/">主页</a></li><li class="menu-item"><span class="menu-icon iconify" data-icon="mdi:file-document"></span> <a class="menu-link" href="/archives">文章</a></li><li class="menu-item"><span class="menu-icon iconify" data-icon="mdi:magnify"></span> <a class="menu-link" href="/search">搜索</a></li><li class="menu-item"><span class="menu-icon iconify" data-icon="mdi:view-grid"></span> <a class="menu-link" href="/apps/">应用</a></li><li class="menu-item"><span class="menu-icon iconify" data-icon="ri:bilibili-fill"></span> <a class="menu-link" target="_blank" rel="noopener" href="https://space.bilibili.com/14334962">Bilibili</a></li><li class="menu-item"><span class="menu-icon iconify" data-icon="mdi:github-circle"></span> <a class="menu-link" target="_blank" rel="noopener" href="https://github.com/su226">GitHub</a></li></ul></nav><div class="navbar-fixed"><nav class="navbar color-grey"><button class="btn-icon" id="toggle-menu"><span class="iconify" data-icon="mdi:menu"></span></button><div class="navbar-title">洛谷比较器用户脚本</div><button class="btn-icon" id="back-to-top"><span class="iconify" data-icon="mdi:arrow-up"></span></button></nav></div><div id="content"><div id="i18n-data-post" class="i18n-data" data-tab-menu="菜单" data-tab-toc="目录" data-comment-unsupported="抱歉，你的浏览器太旧了，不支持评论区。（评论区至少需要 Chrome 71 / Firefox 65 / Edge 79）"></div><article class="post"><div class="post-header color-grey"><div class="container"><h1 class="post-title">洛谷比较器用户脚本</h1><div class="post-info"><span class="iconify" data-icon="mdi:calendar"></span><ul class="post-date"><li><a href="/archives/2019">2019</a></li><li><a href="/archives/2019/08">8</a></li><li>29</li></ul><div class="post-info-wrap"></div><span class="iconify" data-icon="mdi:folder"></span><ul class="post-categories"><li><a href="/categories/%E8%BD%AF%E4%BB%B6/">软件</a></li></ul><span class="iconify" data-icon="mdi:tag"></span><ul class="post-tags"><li><a class="chip" href="/tags/OI/">OI</a></li><li><a class="chip" href="/tags/JavaScript/">JavaScript</a></li><li><a class="chip" href="/tags/%E7%94%A8%E6%88%B7%E8%84%9A%E6%9C%AC/">用户脚本</a></li><li><a class="chip" href="/tags/%E6%B4%9B%E8%B0%B7/">洛谷</a></li></ul></div></div></div><div class="toc" id="toc"><a class="toc-header toc-link" href="#content">洛谷比较器用户脚本</a><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">使用方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9B%B4%E6%96%B0%E6%97%A5%E5%BF%97"><span class="toc-text">更新日志</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#0-0-2"><span class="toc-text">0.0.2</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-text">代码</span></a></li></ol></div><div class="post-background"><div class="post-content container"><p><strong>警告：本脚本随着洛谷更新已经失效。</strong></p><h2 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h2><p>一个简单的脚本，向洛谷用户页加入比较功能，让你的洛谷生活更有动力/更酸/更自闭。</p><p>按钮位置<br><img src="https://i.loli.net/2019/08/29/13eRksbG4FLpiZW.png" alt="按钮位置"></p><p>样例1<br><img src="https://i.loli.net/2019/08/29/9vQbhpHDimuof21.png" alt="样例1"></p><p>样例2<br><img src="https://i.loli.net/2019/08/29/T73jafNJ5ZMoVwP.png" alt="样例2"></p><h2 id="更新日志"><a href="#更新日志" class="headerlink" title="更新日志"></a>更新日志</h2><h3 id="0-0-2"><a href="#0-0-2" class="headerlink" title="0.0.2"></a>0.0.2</h3><ul><li>修复了签名有表格时引发的问题</li></ul><h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><p><a href="/resources/luoguComparator.user.js">一键安装</a><br>需要Tampermonkey或者其他的用户脚本管理器<br>如果插件被正确配置将会弹出安装界面</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ==UserScript==</span></span><br><span class="line"><span class="comment">// @name         洛谷比较器</span></span><br><span class="line"><span class="comment">// @namespace    https://su226.github.io/</span></span><br><span class="line"><span class="comment">// @version      0.0.2</span></span><br><span class="line"><span class="comment">// @description  有对比才知道自己多蒻</span></span><br><span class="line"><span class="comment">// @author       su226</span></span><br><span class="line"><span class="comment">// @match        https://www.luogu.org/space/show?uid=*</span></span><br><span class="line"><span class="comment">// @grant        none</span></span><br><span class="line"><span class="comment">// ==/UserScript==</span></span><br><span class="line"><span class="keyword">const</span> diffIndex = <span class="built_in">Object</span>.freeze(&#123;</span><br><span class="line">  <span class="string">&quot;尚无评定&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;入门难度&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;普及-&quot;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="string">&quot;普及/提高-&quot;</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="string">&quot;普及+/提高&quot;</span>: <span class="number">4</span>,</span><br><span class="line">  <span class="string">&quot;提高+/省选-&quot;</span>: <span class="number">5</span>,</span><br><span class="line">  <span class="string">&quot;省选/NOI-&quot;</span>: <span class="number">6</span>,</span><br><span class="line">  <span class="string">&quot;NOI/NOI+/CTSC&quot;</span>: <span class="number">7</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> diffName = <span class="built_in">Object</span>.freeze([<span class="string">&quot;尚无评定&quot;</span>, <span class="string">&quot;入门难度&quot;</span>, <span class="string">&quot;普及-&quot;</span>, <span class="string">&quot;普及/提高-&quot;</span>, <span class="string">&quot;普及+/提高&quot;</span>, <span class="string">&quot;提高+/省选-&quot;</span>, <span class="string">&quot;省选/NOI-&quot;</span>, <span class="string">&quot;NOI/NOI+/CTSC&quot;</span>]);</span><br><span class="line"><span class="keyword">const</span> diffColor = <span class="built_in">Object</span>.freeze([<span class="string">&quot;gray&quot;</span>, <span class="string">&quot;red&quot;</span>, <span class="string">&quot;orange&quot;</span>, <span class="string">&quot;yellow&quot;</span>, <span class="string">&quot;green&quot;</span>, <span class="string">&quot;bluelight&quot;</span>, <span class="string">&quot;purple&quot;</span>, <span class="string">&quot;bluedark&quot;</span>]);</span><br><span class="line"><span class="keyword">const</span> permIndex = <span class="built_in">Object</span>.freeze(&#123;</span><br><span class="line">  <span class="string">&quot;封禁账户&quot;</span>: <span class="number">0</span>,</span><br><span class="line">  <span class="string">&quot;普通用户&quot;</span>: <span class="number">1</span>,</span><br><span class="line">  <span class="string">&quot;特殊权限&quot;</span>: <span class="number">2</span>,</span><br><span class="line">  <span class="string">&quot;管理员&quot;</span>: <span class="number">3</span>,</span><br><span class="line">  <span class="string">&quot;超级管理员/Root&quot;</span>: <span class="number">4</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">const</span> permName = <span class="built_in">Object</span>.freeze([<span class="string">&quot;封禁账户&quot;</span>, <span class="string">&quot;普通用户&quot;</span>, <span class="string">&quot;特殊权限&quot;</span>, <span class="string">&quot;管理员&quot;</span>, <span class="string">&quot;超级管理员/Root&quot;</span>]);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseBignum</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (a[a.length - <span class="number">1</span>] == <span class="string">&quot;K&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">parseFloat</span>(a.substring(<span class="number">0</span>, a.length - <span class="number">1</span>)) * <span class="number">1000</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (a == <span class="string">&quot;N/A&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">NaN</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">parseInt</span>(a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">toBignum</span>(<span class="params">a</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (a &gt;= <span class="number">1000</span>) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Math</span>.round(a / <span class="number">100</span>) / <span class="number">10</span> + <span class="string">&quot;K&quot;</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">Math</span>.round(a).toString();</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">parseUser</span>(<span class="params">doc</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> data = doc.querySelectorAll(<span class="string">&quot;span.lg-right&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> ret = &#123;</span><br><span class="line">    <span class="attr">username</span>: doc.querySelector(<span class="string">&quot;.lg-toolbar h1&quot;</span>).textContent.split(<span class="string">&quot; &quot;</span>)[<span class="number">1</span>],</span><br><span class="line">    <span class="attr">uid</span>: <span class="built_in">parseInt</span>(data[<span class="number">0</span>].textContent),</span><br><span class="line">    <span class="attr">regTime</span>: <span class="keyword">new</span> <span class="built_in">Date</span>(data[<span class="number">2</span>].textContent.trim()),</span><br><span class="line">    <span class="attr">permission</span>: permIndex[data[<span class="number">1</span>].textContent]</span><br><span class="line">  &#125;;</span><br><span class="line">  <span class="keyword">let</span> nums = doc.querySelectorAll(<span class="string">&quot;.lg-bignum-num&quot;</span>);</span><br><span class="line">  <span class="keyword">if</span> (nums.length == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">Object</span>.assign(ret, &#123;</span><br><span class="line">      <span class="attr">submissions</span>: <span class="literal">NaN</span>,</span><br><span class="line">      <span class="attr">accepted</span>: <span class="literal">NaN</span>,</span><br><span class="line">      <span class="attr">rank</span>: <span class="literal">NaN</span>,</span><br><span class="line">      <span class="attr">difficulty</span>: [<span class="literal">NaN</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>, <span class="literal">NaN</span>]</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> difficulties = [<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>];</span><br><span class="line">    doc.querySelectorAll(<span class="string">&quot;.am-u-md-4 tr&quot;</span>).forEach(<span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">      difficulties[diffIndex[e.children[<span class="number">0</span>].children[<span class="number">0</span>].textContent]] = <span class="built_in">parseInt</span>(e.children[<span class="number">1</span>].children[<span class="number">0</span>].textContent);</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="built_in">Object</span>.assign(ret, &#123;</span><br><span class="line">      <span class="attr">submissions</span>: parseBignum(nums[<span class="number">0</span>].textContent),</span><br><span class="line">      <span class="attr">accepted</span>: parseBignum(nums[<span class="number">1</span>].textContent),</span><br><span class="line">      <span class="attr">rank</span>: parseBignum(nums[<span class="number">2</span>].textContent),</span><br><span class="line">      <span class="attr">difficulty</span>: difficulties</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> tos = <span class="function"><span class="params">o</span> =&gt;</span> o.toString();</span><br><span class="line"><span class="keyword">let</span> ge = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a &gt;= b || <span class="built_in">Number</span>.isNaN(b);</span><br><span class="line"><span class="keyword">let</span> le = <span class="function">(<span class="params">a, b</span>) =&gt;</span> a &lt;= b || <span class="built_in">Number</span>.isNaN(b);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getTd</span>(<span class="params">d1, d2, fmt, cmp</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (fmt == <span class="literal">null</span>) &#123;</span><br><span class="line">    fmt = tos;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (cmp == <span class="literal">null</span>) &#123;</span><br><span class="line">    cmp = ge;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (cmp(d1, d2)) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">`&lt;td&gt;&lt;span class=&quot;am-badge am-badge-success&quot;&gt;<span class="subst">$&#123;fmt(d1)&#125;</span>&lt;/span&gt;&lt;/td&gt;&lt;td&gt;<span class="subst">$&#123;fmt(d2)&#125;</span>&lt;/td&gt;`</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="string">`&lt;td&gt;<span class="subst">$&#123;fmt(d1)&#125;</span>&lt;/td&gt;&lt;td&gt;&lt;span class=&quot;am-badge am-badge-success&quot;&gt;<span class="subst">$&#123;fmt(d2)&#125;</span>&lt;/span&gt;&lt;/td&gt;`</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">compareUsers</span>(<span class="params">me, user</span>) </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">getDiffTd</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> ret = <span class="string">&quot;&quot;</span>;</span><br><span class="line">    diffName.forEach(<span class="function">(<span class="params">v, k</span>) =&gt;</span> &#123;</span><br><span class="line">      ret += <span class="string">`&lt;tr&gt;&lt;td&gt;&lt;span class=&quot;am-badge lg-bg-<span class="subst">$&#123;diffColor[k]&#125;</span>&quot;&gt;<span class="subst">$&#123;v&#125;</span>&lt;/span&gt;&lt;/td&gt;<span class="subst">$&#123;getTd(me.difficulty[k], user.difficulty[k])&#125;</span>&lt;/tr&gt;`</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">return</span> ret;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">let</span> curTime = <span class="keyword">new</span> <span class="built_in">Date</span>().getTime();</span><br><span class="line">  <span class="keyword">let</span> myDay = <span class="built_in">Math</span>.ceil((curTime - me.regTime.getTime()) / <span class="number">86400000</span>);</span><br><span class="line">  <span class="keyword">let</span> userDay = <span class="built_in">Math</span>.ceil((curTime - user.regTime.getTime()) / <span class="number">86400000</span>);</span><br><span class="line">  <span class="keyword">if</span> (modalCmp) &#123;</span><br><span class="line">    <span class="built_in">document</span>.body.removeChild(modalCmp);</span><br><span class="line">  &#125;</span><br><span class="line">  modalCmp = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">  modalCmp.className = <span class="string">&quot;am-modal&quot;</span>;</span><br><span class="line">  <span class="built_in">document</span>.body.appendChild(modalCmp);</span><br><span class="line">  modalCmp.innerHTML = <span class="string">`</span></span><br><span class="line"><span class="string">&lt;div class=&quot;am-modal-dialog&quot;&gt;</span></span><br><span class="line"><span class="string">  &lt;table class=&quot;am-table&quot;&gt;</span></span><br><span class="line"><span class="string">    &lt;thead&gt;</span></span><br><span class="line"><span class="string">      &lt;tr&gt;</span></span><br><span class="line"><span class="string">        &lt;th style=&quot;width:140px&quot;&gt;&lt;a href=&quot;javascript:;&quot; class=&quot;am-close am-close-spin&quot; data-am-modal-close&gt;&amp;times;&lt;/a&gt;&lt;/th&gt;</span></span><br><span class="line"><span class="string">        &lt;th style=&quot;width:200px;text-align:center&quot;&gt;<span class="subst">$&#123;me.username&#125;</span>&lt;/th&gt;</span></span><br><span class="line"><span class="string">        &lt;th style=&quot;width:200px;text-align:center&quot;&gt;<span class="subst">$&#123;user.username&#125;</span>&lt;/th&gt;</span></span><br><span class="line"><span class="string">      &lt;/tr&gt;</span></span><br><span class="line"><span class="string">    &lt;/thead&gt;</span></span><br><span class="line"><span class="string">    &lt;tbody&gt;</span></span><br><span class="line"><span class="string">      &lt;tr&gt;&lt;td&gt;UID&lt;/td&gt;<span class="subst">$&#123;getTd(me.uid, user.uid, tos, le)&#125;</span>&lt;/tr&gt;</span></span><br><span class="line"><span class="string">      &lt;tr&gt;&lt;td&gt;权限&lt;/td&gt;<span class="subst">$&#123;getTd(me.permission, user.permission, o =&gt; permName[o])&#125;</span>&lt;/tr&gt;</span></span><br><span class="line"><span class="string">      &lt;tr&gt;&lt;td&gt;注册天数&lt;/td&gt;<span class="subst">$&#123;getTd(myDay, userDay)&#125;</span>&lt;/tr&gt;</span></span><br><span class="line"><span class="string">      &lt;tr&gt;&lt;td&gt;提交数&lt;/td&gt;<span class="subst">$&#123;getTd(me.submissions, user.submissions, o =&gt; toBignum(o))&#125;</span>&lt;/tr&gt;</span></span><br><span class="line"><span class="string">      &lt;tr&gt;&lt;td&gt;通过数&lt;/td&gt;<span class="subst">$&#123;getTd(me.accepted, user.accepted, o =&gt; toBignum(o))&#125;</span>&lt;/tr&gt;</span></span><br><span class="line"><span class="string">      &lt;tr&gt;&lt;td&gt;排名&lt;/td&gt;<span class="subst">$&#123;getTd(me.rank, user.rank, o =&gt; toBignum(o), le)&#125;</span>&lt;/tr&gt;</span></span><br><span class="line"><span class="string">      <span class="subst">$&#123;getDiffTd()&#125;</span></span></span><br><span class="line"><span class="string">    &lt;/tbody&gt;</span></span><br><span class="line"><span class="string">  &lt;/table&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;`</span>;</span><br><span class="line">  $(modalCmp).modal(<span class="string">&quot;open&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">let</span> btn = <span class="built_in">document</span>.createElement(<span class="string">&quot;button&quot;</span>);</span><br><span class="line">btn.textContent = <span class="string">&quot;比较&quot;</span>;</span><br><span class="line">btn.className = <span class="string">&quot;am-btn am-btn-sm am-btn-danger&quot;</span>;</span><br><span class="line">btn.onclick =　<span class="function">() =&gt;</span> &#123;</span><br><span class="line">  $(modalLoad).modal(<span class="string">&quot;open&quot;</span>);</span><br><span class="line">  <span class="keyword">let</span> xhr = <span class="keyword">new</span> XMLHttpRequest();</span><br><span class="line">  <span class="keyword">let</span> myuid = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.avatar&quot;</span>).src;</span><br><span class="line">  myuid = <span class="built_in">parseInt</span>(myuid.substring(<span class="number">38</span>, myuid.length - <span class="number">4</span>));</span><br><span class="line">  xhr.open(<span class="string">&quot;GET&quot;</span>, <span class="string">`https://www.luogu.org/space/show?uid=<span class="subst">$&#123;myuid&#125;</span>`</span>);</span><br><span class="line">  xhr.onload = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    $(modalLoad).modal(<span class="string">&quot;close&quot;</span>);</span><br><span class="line">    compareUsers(</span><br><span class="line">      parseUser(<span class="keyword">new</span> DOMParser().parseFromString(xhr.responseText, <span class="string">&quot;text/html&quot;</span>)),</span><br><span class="line">      parseUser(<span class="built_in">document</span>));</span><br><span class="line">  &#125;;</span><br><span class="line">  xhr.send();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">document</span>.querySelector(<span class="string">&quot;.lg-summary-content p&quot;</span>).appendChild(btn);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> modalCmp;</span><br><span class="line"><span class="keyword">let</span> modalLoad = <span class="built_in">document</span>.createElement(<span class="string">&quot;div&quot;</span>);</span><br><span class="line">modalLoad.className = <span class="string">&quot;am-modal am-modal-loading&quot;</span>;</span><br><span class="line">modalLoad.innerHTML = <span class="string">`&lt;div class=&quot;am-modal-dialog&quot;&gt;&lt;div class=&quot;am-modal-hd&quot;&gt;正在请求我的数据&lt;/div&gt;&lt;div class=&quot;am-modal-bd&quot;&gt;&lt;span class=&quot;am-icon-spinner am-icon-spin&quot;&gt;&lt;/span&gt;&lt;/div&gt;&lt;/div&gt;`</span>;</span><br><span class="line"><span class="built_in">document</span>.body.appendChild(modalLoad);</span><br></pre></td></tr></table></figure></div></div></article><div class="container giscus-wrap"><script id="giscus-script" data-repo="su226/su226.github.io" data-repo-id="MDEwOlJlcG9zaXRvcnkxOTgzMjQyNTk=" data-category="Announcements" data-category-id="DIC_kwDOC9IwI84B_VPa" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-lang="zh-CN" data-theme="light" crossorigin="anonymous" async></script></div><div id="footer">由 <a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a> 强力驱动，托管于 <a target="_blank" rel="noopener" href="https://vercel.com/">Vercel</a>（<a target="_blank" rel="noopener" href="https://gh.su226.tk">备用线路</a>托管于 <a target="_blank" rel="noopener" href="https://pages.github.com/">Github Pages</a>）</div></div><ul id="settings-dialog"><li data-select="scheme" data-default="auto"><button data-option="auto"><span class="iconify" data-icon="mdi:check"></span></button> <button data-option="multi"><span class="iconify" data-icon="mdi:check"></span></button> <button data-option="single"><span class="iconify" data-icon="mdi:check"></span></button> <button data-option="sepia"><span class="iconify" data-icon="mdi:check"></span></button> <button data-option="dark"><span class="iconify" data-icon="mdi:check"></span></button></li><li data-select="font" data-default="sans"><button data-option="sans">Aa</button> <button data-option="serif">Aa</button> <button data-option="mono">Aa</button></li><li><div data-adjust="size"><button data-minus><span class="iconify" data-icon="mdi:minus"></span></button><div class="subgroup-label"><span class="iconify" data-icon="mdi:format-size"></span><span data-label></span></div><button data-plus><span class="iconify" data-icon="mdi:plus"></span></button></div><div data-adjust="width"><button data-minus><span class="iconify" data-icon="mdi:minus"></span></button><div class="subgroup-label"><span class="iconify" data-icon="mdi:arrow-left-right"></span><span data-label></span></div><button data-plus><span class="iconify" data-icon="mdi:plus"></span></button></div><div data-adjust="line"><button data-minus><span class="iconify" data-icon="mdi:minus"></span></button><div class="subgroup-label"><span class="iconify" data-icon="mdi:arrow-expand-vertical"></span><span data-label></span></div><button data-plus><span class="iconify" data-icon="mdi:plus"></span></button></div></li></ul><script src="https://polyfill.io/v3/polyfill.min.js?features=Array.from%2CArray.prototype.%40%40iterator%2Cdocument.currentScript%2CPromise%2Cfetch%2CElement.prototype.replaceWith%2CElement.prototype.classList%2CElement.prototype.remove%2Cwindow.scroll%2CCustomEvent%2CObject.values%2CObject.entries"></script><script src="https://code.iconify.design/2/2.0.4/iconify.min.js" async></script><script src="/js/waves-0.7.6-min.js"></script><script src="/js/regenerator-runtime-0.13.9-min.js"></script><script src="/js/base.js"></script><script src="/js/post.js"></script></body></html>